{"version":3,"sources":["../../../build/controllers/crud/followingController.js"],"names":["__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","Object","defineProperty","exports","crudController_1","require","services_1","FollowingController","followingService","params","option","user_id","userService","getList","filter","include","association","where","attributes","limit","offset","console","log","postService","privacy","$ne","follower_id","create","action","delete","CrudController"],"mappings":"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","file":"followingController.js","sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst crudController_1 = require(\"../crudController\");\nconst services_1 = require(\"@/services\");\nclass FollowingController extends crudController_1.CrudController {\n    constructor() {\n        super(services_1.followingService);\n    }\n    getFollowers(params, option) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let { user_id } = params;\n            return yield services_1.userService.getList({\n                filter: {},\n                include: [\n                    {\n                        association: 'followings',\n                        where: {\n                            user_id: user_id\n                        },\n                        attributes: []\n                    }\n                ],\n                limit: option.limit,\n                offset: option.offset\n            });\n        });\n    }\n    getFollowings(params, option) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let { user_id } = params;\n            return yield services_1.userService.getList({\n                filter: {},\n                include: [\n                    {\n                        association: 'followers',\n                        where: {\n                            user_id: user_id\n                        },\n                        attributes: []\n                    }\n                ],\n                limit: option.limit,\n                offset: option.offset\n            });\n        });\n    }\n    getNewfeeds(params, option) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let { user_id } = params;\n            console.log(user_id);\n            return yield services_1.postService.getList({\n                filter: {\n                    privacy: 'PUBLIC',\n                    user_id: {\n                        $ne: user_id\n                    }\n                },\n                // include: [\n                //     {\n                //         association: 'followers',\n                //         where: {\n                //             user_id: user_id\n                //         },\n                //         attributes: []\n                //     }\n                // ],\n                limit: option.limit,\n                offset: option.offset\n            });\n        });\n    }\n    followUser(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let { user_id, follower_id } = params;\n            return yield services_1.followingService.create({\n                user_id,\n                follower_id,\n                action: \"DEFAULT\"\n            });\n        });\n    }\n    unFollowUser(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let { user_id, follower_id } = params;\n            return yield services_1.followingService.delete({\n                filter: {\n                    user_id,\n                    follower_id\n                }\n            });\n        });\n    }\n}\nexports.FollowingController = FollowingController;\n//# sourceMappingURL=followingController.js.map"]}