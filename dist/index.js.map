{"version":3,"sources":["../build/index.js"],"names":["Object","defineProperty","exports","value","express","require","bodyParser","logger","expressValidator","config_1","routers_1","cors","Raven","config","install","console","log","process","pid","server","port","app","use","skip","req","res","url","json","limit","urlencoded","extended","default","set","get","request","response","send","listen","name","protocol","host"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACAA,OAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C,EAAEC,OAAO,IAAT,EAA7C;AACA,IAAMC,iCAAUC,QAAQ,SAAR,CAAV,CAAN;AACA,IAAMC,oCAAaD,QAAQ,aAAR,CAAb,CAAN;AACA,IAAME,gCAASF,QAAQ,QAAR,CAAT,CAAN;AACA,IAAMG,0CAAmBH,QAAQ,mBAAR,CAAnB,CAAN;AACA,IAAMI,kCAAWJ,QAAQ,UAAR,CAAX,CAAN;AACA,IAAMK,mCAAYL,QAAQ,WAAR,CAAZ,CAAN;AACA,IAAMM,8BAAON,QAAQ,MAAR,CAAP,CAAN;AACA,IAAIO,+BAAQP,QAAQ,OAAR,CAAR,CAAJ;;AACAO,MAAMC,MAAN,CAAa,4DAAb,EAA2EC,OAA3E;;AACAC,QAAQC,GAAR,CAAY,6BAA6BC,QAAQC,GAArC,GAA2C,WAA3C,GAAyDT,SAASI,MAAT,CAAgBM,MAAhB,CAAuBC,IAA5F;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAMC,8BAAMjB,SAAN,CAAN;;AACAiB,IAAIC,GAAJ,CAAQf,OAAO,QAAP,EAAiB;AACrBgB,UAAM,cAAUC,GAAV,EAAeC,GAAf,EAAoB;AAAA;AAAA;;AACtB,YAAID,IAAIE,GAAJ,IAAW,aAAf,EAA8B;AAAA;AAAA;;AAC1B,mBAAO,IAAP;AACH,SAFD,MAGK;AAAA;AAAA;;AACD,mBAAO,KAAP;AACH;AACJ;AARoB,CAAjB,CAAR;;AAUAL,IAAIC,GAAJ,CAAQhB,WAAWqB,IAAX,CAAgB;AACpBC,WAAO;AADa,CAAhB,CAAR;;AAGAP,IAAIC,GAAJ,CAAQhB,WAAWuB,UAAX,CAAsB;AAC1BC,cAAU,KADgB;AAE1BF,WAAO;AAFmB,CAAtB,CAAR;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAP,IAAIC,GAAJ,CAAQd,kBAAR;;AACAa,IAAIC,GAAJ,CAAQ,QAAR,EAAkBX,MAAlB;;AACAU,IAAIC,GAAJ,CAAQ,MAAR,EAAgBZ,UAAUqB,OAA1B;;AACAV,IAAIW,GAAJ,CAAQ,MAAR,EAAgBvB,SAASI,MAAT,CAAgBM,MAAhB,CAAuBC,IAAvC;;AACAC,IAAIY,GAAJ,CAAQ,GAAR,EAAa,UAAUC,OAAV,EAAmBC,QAAnB,EAA6B;AAAA;AAAA;;AACtCA,aAASC,IAAT,CAAc,gBAAd;AACH,CAFD,EAEGC,MAFH,CAEUhB,IAAIY,GAAJ,CAAQ,MAAR,CAFV,EAE2B,YAAY;AAAA;AAAA;;AACnClB,YAAQC,GAAR,CAAeP,SAASI,MAAT,CAAgBM,MAAhB,CAAuBmB,IAAtC,oBAAyD7B,SAASI,MAAT,CAAgBM,MAAhB,CAAuBoB,QAAhF,WAA8F9B,SAASI,MAAT,CAAgBM,MAAhB,CAAuBqB,IAArH,SAA6HnB,IAAIY,GAAJ,CAAQ,MAAR,CAA7H;AACH,CAJD;AAKA","file":"index.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst express = require(\"express\");\nconst bodyParser = require(\"body-parser\");\nconst logger = require(\"morgan\");\nconst expressValidator = require(\"express-validator\");\nconst config_1 = require(\"@/config\");\nconst routers_1 = require(\"./routers\");\nconst cors = require(\"cors\");\nvar Raven = require('raven');\nRaven.config('https://3a369651752640bfa3527eb4391e948c@sentry.io/1218239').install();\nconsole.log(\"Starting server with at \" + process.pid + \" on port \" + config_1.config.server.port);\n// Connect Database\n// const MongoStore = mongo(session)\n// console.log('mongo', config.database.mongo)\n// mongoose.connect(config.database.mongo)\n/**\n * Express configuration.\n */\nconst app = express();\napp.use(logger('common', {\n    skip: function (req, res) {\n        if (req.url == '/_ah/health') {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n}));\napp.use(bodyParser.json({\n    limit: '50mb'\n}));\napp.use(bodyParser.urlencoded({\n    extended: false,\n    limit: '50mb'\n}));\n// app.use(session({\n//     resave: true,\n//     saveUninitialized: true,\n//     secret: config.database.sessionSecret,\n//     store: new MongoStore({\n//         url: config.database.mongo,\n//         autoReconnect: true\n//     })\n// }))\napp.use(expressValidator());\napp.use('/api/*', cors());\napp.use('/api', routers_1.default);\napp.set('port', config_1.config.server.port);\napp.get('/', function (request, response) {\n    response.send('App is running');\n}).listen(app.get('port'), function () {\n    console.log(`${config_1.config.server.name} started at ${config_1.config.server.protocol}://${config_1.config.server.host}:${app.get('port')}`);\n});\n//# sourceMappingURL=index.js.map"]}